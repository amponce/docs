---
title: "SDKs & Libraries"
sidebarTitle: "SDKs"
description: "Official SDKs and client libraries for Relay Agent"
---

# SDKs & Libraries

Relay Agent provides an official TypeScript/Node.js SDK and supports direct
REST API access from any language.

---

## TypeScript / Node.js SDK

The official SDK is published as `@relay-agent/sdk`. It provides typed methods
for every API endpoint, automatic authentication, and error handling.

### Installation

```bash
npm install @relay-agent/sdk
```

### Client Initialization

```typescript
import { RelayClient } from "@relay-agent/sdk";

const client = new RelayClient({
  apiKey: process.env.RELAY_API_KEY!,
  baseUrl: "http://localhost:3001", // Default
  timeout: 10000, // Request timeout in ms (default: 10000)
});
```

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `apiKey` | `string` | (required) | API key starting with `ra_` |
| `baseUrl` | `string` | `http://localhost:3001` | Base URL of the Relay Agent server |
| `timeout` | `number` | `10000` | Request timeout in milliseconds |

<Warning>
The SDK validates the API key format at initialization. Keys must start with
`ra_` or the constructor will throw an error.
</Warning>

---

### API Namespaces

The SDK organizes methods into namespaces that mirror the API:

| Namespace | Description |
|-----------|-------------|
| `client.agents` | Create, list, update, delete agents and composed agents |
| `client.calls` | Create phone/web calls, whisper, interject, terminate, inspect |
| `client.phoneNumbers` | Manage phone number configuration |
| `client.knowledgeBases` | Create knowledge bases, upload files, run queries |
| `client.campaigns` | Create and manage outbound calling campaigns |
| `client.abTests` | Set up and run A/B tests between agent variants |
| `client.usage` | Retrieve usage summaries, daily breakdowns, per-agent costs |

---

### Agents

```typescript
// Create an agent
const agent = await client.agents.create({
  name: "Sales Agent",
  model: {
    provider: "openai",
    model: "gpt-4.1-mini",
    temperature: 0.7,
    systemPrompt: "You are a sales agent for Acme Corp...",
  },
  voice: {
    provider: "elevenlabs",
    voiceId: "rachel",
    speed: 1.0,
    stability: 0.5,
  },
  firstMessage: "Hello! I am calling from Acme Corp.",
  tools: [
    {
      type: "function",
      function: {
        name: "check_inventory",
        description: "Check product availability",
        parameters: {
          type: "object",
          properties: {
            productId: { type: "string", description: "The product SKU" },
          },
          required: ["productId"],
        },
      },
      server: {
        url: "https://api.example.com/inventory",
        timeoutMs: 5000,
      },
    },
  ],
  memory: {
    enabled: true,
    strategy: "per-contact",
    retentionDays: 90,
    autoSummarize: true,
  },
});

// List agents
const { data: agents, hasMore } = await client.agents.list({
  limit: 20,
  offset: 0,
});

// Get a single agent
const agentDetail = await client.agents.get("agent_abc123");

// Update an agent (increments version automatically)
const updated = await client.agents.update("agent_abc123", {
  name: "Updated Sales Agent",
  model: {
    provider: "anthropic",
    model: "claude-sonnet-4-20250514",
    systemPrompt: "You are an updated sales agent...",
  },
});

// Delete an agent
await client.agents.delete("agent_abc123");
```

### Composed Agents (Multi-Agent)

```typescript
// Create a multi-agent composition
const composed = await client.agents.createComposed({
  name: "Law Firm Intake",
  routerAgentId: "agent_router",
  agents: [
    { id: "agent_router", role: "router" },
    { id: "agent_intake", role: "intake_specialist" },
    { id: "agent_legal", role: "legal_advisor" },
  ],
  transitions: [
    { from: "agent_router", to: "agent_intake", condition: "new_client" },
    { from: "agent_intake", to: "agent_legal", condition: "legal_question" },
    { from: "agent_legal", to: "agent_router", condition: "done" },
  ],
  sharedContext: true,
  seamlessHandoff: true,
});

// List composed agents
const { data: compositions } = await client.agents.listComposed();

// Get a composed agent
const detail = await client.agents.getComposed("composed_abc123");
```

---

### Calls

```typescript
// Create a phone call
const phoneCall = await client.calls.createPhone({
  agentId: "agent_abc123",
  from: "+15551234567",
  to: "+15559876543",
  dynamicVariables: {
    customerName: "Jane Doe",
    orderId: "ORD-12345",
  },
  metadata: {
    source: "crm",
    ticketId: "TICKET-789",
  },
});

// Create a web call
const webCall = await client.calls.createWeb({
  agentId: "agent_abc123",
  dynamicVariables: {
    userName: "John",
  },
});
console.log("WebSocket URL:", webCall.websocketUrl);
console.log("Access Token:", webCall.accessToken);

// List calls with filters
const { data: callList } = await client.calls.list({
  limit: 50,
  status: "completed",
  direction: "outbound",
});

// Get call details (includes transcript, cost, latency)
const call = await client.calls.get("call_xyz789");
console.log("Duration:", call.durationMs, "ms");
console.log("Cost:", call.cost?.total, "cents");
console.log("Transcript:", call.transcript);

// Whisper context to agent mid-call (agent hears it, caller does not)
await client.calls.whisper("call_xyz789", "The customer is a VIP member.");

// Interject: override agent with a specific response
await client.calls.interject(
  "call_xyz789",
  "Let me transfer you to a specialist right away."
);

// Terminate a call
await client.calls.terminate("call_xyz789", {
  reason: "resolved",
  finalMessage: "Thank you for calling. Goodbye!",
});
```

### Live Call Inspector

```typescript
// Connect to a live call's DevTools stream
const inspector = client.calls.inspect("call_xyz789");

inspector.on("event", (event) => {
  switch (event.type) {
    case "stt:partial":
      console.log("[STT Partial]", event.data.text);
      break;
    case "stt:final":
      console.log("[STT Final]", event.data.text);
      break;
    case "llm:token":
      process.stdout.write(event.data.token);
      break;
    case "latency":
      console.log("[Latency]", event.data);
      break;
    case "stage":
      console.log("[Stage]", event.data.stage);
      break;
  }
});

// Fetch historical events via REST
const events = await inspector.getEvents({ type: "stt:final", limit: 20 });
```

---

### Knowledge Bases

```typescript
// Create a knowledge base
const kb = await client.knowledgeBases.create({
  name: "Product Documentation",
  description: "All product manuals and FAQs",
  embeddingModel: "text-embedding-3-small",
  chunkSize: 512,
  chunkOverlap: 50,
});

// Add a file
const file = await client.knowledgeBases.addFile(kb.id, {
  filename: "product-manual.pdf",
  mimeType: "application/pdf",
  content: base64EncodedContent,
});

// Query the knowledge base
const results = await client.knowledgeBases.query(kb.id, {
  query: "How do I reset my device?",
  topK: 3,
  threshold: 0.7,
});

console.log("Top result:", results.results[0].content);
console.log("Score:", results.results[0].score);
```

---

### Campaigns

```typescript
// Create a campaign
const campaign = await client.campaigns.create({
  name: "January Outreach",
  agentId: "agent_abc123",
  fromNumber: "+15551234567",
  schedule: {
    startAt: "2026-02-10T09:00:00Z",
    callingHours: { start: "09:00", end: "17:00" },
    daysOfWeek: [1, 2, 3, 4, 5],
    maxConcurrent: 5,
    callsPerMinute: 2,
  },
  retryPolicy: {
    maxAttempts: 3,
    delayMinutes: 60,
    retryOn: ["no_answer", "busy"],
  },
});

// Add contacts
await client.campaigns.addContacts(campaign.id, [
  {
    phoneNumber: "+15559876543",
    dynamicVariables: { firstName: "Jane", plan: "Pro" },
  },
  {
    phoneNumber: "+15551112222",
    dynamicVariables: { firstName: "Bob", plan: "Enterprise" },
  },
]);

// Start the campaign
await client.campaigns.start(campaign.id);

// Get results
const results = await client.campaigns.getResults(campaign.id);
console.log(`Completed: ${results.completedCalls}/${results.totalContacts}`);
```

---

### Usage & Billing

```typescript
// Get usage summary for a date range
const summary = await client.usage.getSummary({
  startDate: "2026-01-01",
  endDate: "2026-01-31",
});

console.log("Total cost:", summary.totalCostCents, "cents");
console.log("Total minutes:", summary.totalMinutes);
console.log("Total calls:", summary.totalCalls);
console.log("By component:", summary.byComponent);

// Get daily breakdown
const daily = await client.usage.getDaily({
  startDate: "2026-01-01",
  endDate: "2026-01-31",
});

daily.forEach((day) => {
  console.log(`${day.date}: ${day.costCents} cents, ${day.calls} calls`);
});

// Get usage grouped by agent
const byAgent = await client.usage.getByAgent();
```

---

### Error Handling

The SDK throws `RelayAPIError` for all API errors with typed fields:

```typescript
import { RelayClient, RelayAPIError } from "@relay-agent/sdk";

try {
  const agent = await client.agents.get("agent_nonexistent");
} catch (error) {
  if (error instanceof RelayAPIError) {
    console.error("Status:", error.statusCode); // 404
    console.error("Code:", error.code); // "not_found"
    console.error("Message:", error.message); // "Agent not found"
  }
}
```

| Status Code | Error Code | Description |
|-------------|-----------|-------------|
| 400 | `validation_error` | Invalid request body or parameters |
| 401 | `authentication_error` | Missing or invalid API key |
| 404 | `not_found` | Resource does not exist |
| 429 | `rate_limit_exceeded` | Too many requests |
| 500 | `internal_error` | Server error |

---

## REST API (Direct Usage)

You can call the Relay Agent API directly from any language using standard HTTP
requests. All endpoints are under the `/v1/` prefix.

### Python (requests)

```python
import os
import requests

BASE_URL = "http://localhost:3001"
API_KEY = os.environ["RELAY_API_KEY"]

headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json",
}

# Create an agent
agent = requests.post(
    f"{BASE_URL}/v1/agents",
    headers=headers,
    json={
        "name": "Python Agent",
        "model": {
            "provider": "anthropic",
            "model": "claude-sonnet-4-20250514",
            "systemPrompt": "You are a helpful assistant.",
        },
        "voice": {
            "provider": "elevenlabs",
            "voiceId": "rachel",
        },
    },
).json()

# Create a web call
web_call = requests.post(
    f"{BASE_URL}/v1/calls/web",
    headers=headers,
    json={"agentId": agent["id"]},
).json()

print(f"WebSocket URL: {web_call['websocketUrl']}")

# List calls
calls = requests.get(
    f"{BASE_URL}/v1/calls",
    headers=headers,
    params={"limit": 10, "status": "completed"},
).json()

for call in calls["data"]:
    print(f"{call['id']}: {call['status']} ({call['durationMs']}ms)")
```

### Go (net/http)

```go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
    "os"
)

func main() {
    apiKey := os.Getenv("RELAY_API_KEY")
    baseURL := "http://localhost:3001"

    body, _ := json.Marshal(map[string]interface{}{
        "name": "Go Agent",
        "model": map[string]interface{}{
            "provider":     "openai",
            "model":        "gpt-4.1-mini",
            "systemPrompt": "You are a helpful assistant.",
        },
        "voice": map[string]interface{}{
            "provider": "elevenlabs",
            "voiceId":  "rachel",
        },
    })

    req, _ := http.NewRequest("POST", baseURL+"/v1/agents", bytes.NewBuffer(body))
    req.Header.Set("Authorization", "Bearer "+apiKey)
    req.Header.Set("Content-Type", "application/json")

    resp, err := http.DefaultClient.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()

    var agent map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&agent)
    fmt.Printf("Agent created: %s\n", agent["id"])
}
```

---

## Community SDKs

<Info>
Community SDKs are maintained by third parties and are not officially supported
by the Relay Agent team. We welcome contributions.
</Info>

| Language | Package | Status |
|----------|---------|--------|
| Python | Coming soon | Planned |
| Go | Coming soon | Planned |
| Ruby | Coming soon | Community interest |

Interested in building an SDK? The REST API follows standard conventions and
returns consistent JSON responses. See the [API Reference](/api-reference) for
full endpoint documentation.
